# Appendix A: Formulas

This appendix collects the key mathematical formulas that govern Aurora C# mechanics. Understanding these calculations helps with ship design optimization, fleet planning, and economic development.

## A.1 Movement and Speed

### Ship Speed

The fundamental speed formula for any vessel:

```
Speed (km/s) = Total_Engine_Power / Ship_Mass (tons)
```

Where:
- **Total_Engine_Power** = Number_of_Engines x Engine_Power_per_Unit
- **Ship_Mass** = Hull_Size + Armor_Mass + Component_Mass + Cargo/Fuel_Mass

**Example**: A 10,000-ton ship with two engines producing 2,500 EP each:
```
Speed = (2 x 2500) / 10000 = 0.5 km/s per EP...
Speed = 5000 EP / 10000 tons = 500 km/s (if engines use Power x50 modifier)
```

The actual speed depends on your engine technology. Engine power is calculated as:

```
Engine_Power = Engine_Size (HS) x Power_per_HS x Boost_Modifier
```

Where:
- **Power_per_HS** is determined by engine technology research (starts at 5, increases with tech)
- **Boost_Modifier** ranges from 0.5x to 3.0x (higher boost = more power but reduced fuel efficiency)

### Fuel Consumption

```
Fuel_per_Hour = Total_Engine_Power x Fuel_Consumption_Rate x Boost_Penalty
```

Where:
- **Fuel_Consumption_Rate** is determined by fuel consumption technology (base 1.0, reduced by research)
- **Boost_Penalty** is exponential: 1x boost = 1.0, 1.5x boost = ~2.25, 2x boost = ~4.0, 3x boost = ~9.0

### Range Calculation

```
Range (km) = Fuel_Capacity / Fuel_per_Hour x 3600 x Speed
```

Or equivalently:
```
Range (billion km) = Fuel_Capacity / (Fuel_per_Hour x 1000000)
```

### Time to Destination

```
Time (seconds) = Distance (km) / Speed (km/s)
```

For jump point transits, add the transit time (typically instantaneous for military jump drives, or 5 minutes for commercial jump drives including squadron transit).

### Missile Speed

```
Missile_Speed (km/s) = Missile_Engine_Power / Missile_Mass
```

Missile engines are typically much more powerful per unit mass than ship engines but have limited fuel duration:

```
Missile_Endurance (seconds) = Missile_Fuel / Missile_Fuel_Consumption
Missile_Range (km) = Missile_Speed x Missile_Endurance
```

### Missile Agility (MSP-based)

```
Agility = Engine_MSP / Total_Missile_MSP x Agility_Tech_Modifier x 100
```

Higher agility improves hit chance against maneuvering targets and makes the missile harder to intercept with point defense.

## A.2 Sensor Range

### Passive Sensor Detection (Thermal)

```
Detection_Range (km) = Sensor_Sensitivity x Target_Thermal_Signature x 10000
```

Where:
- **Sensor_Sensitivity** = Sensor_Size (HS) x Sensitivity_Tech_Level
- **Target_Thermal_Signature** = Total_Engine_Power / Thermal_Reduction_Tech

A ship's thermal signature is primarily determined by its engines:
```
Thermal_Signature = Total_Engine_Power / Thermal_Reduction_Modifier
```

### Passive Sensor Detection (EM)

```
Detection_Range (km) = Sensor_Sensitivity x Target_EM_Signature x 10000
```

Where:
- **Target_EM_Signature** is generated by active sensors, shields, and certain other components when active

Ships with no active emissions (shields off, active sensors off) have EM signature of 0 and are invisible to EM sensors.

### Active Sensor Detection

```
Detection_Range (km) = sqrt(Sensor_Strength x Target_Cross_Section) x 10000
```

Where:
- **Sensor_Strength** = Sensor_Size (HS) x Resolution x Active_Tech_Level
- **Target_Cross_Section** = Ship_Size (tons) / 50 (for the sensor's resolution)

A sensor designed for resolution-100 detects 5000-ton ships at full range. Smaller ships are detected at reduced range:

```
Effective_Range = Base_Range x sqrt(Actual_Ship_HS / Sensor_Resolution)
```

**Example**: A sensor with 100M km range at resolution-100 detecting a resolution-20 ship:
```
Effective_Range = 100M x sqrt(20/100) = 100M x 0.447 = 44.7M km
```

### Missile Fire Control Range

```
FC_Range (km) = FC_Size x Resolution x FC_Tech_Level x 10000
```

The fire control range limits the maximum engagement distance for missiles. Missiles beyond their fire control's range lose guidance.

### Cloaking Effect on Detection

```
Effective_Signature = Actual_Signature x (1 - Cloak_Percentage/100)
```

A 60% cloak reduces all signatures to 40% of their actual value, reducing detection range proportionally.

## A.3 Production

### Construction Factory Output

```
Annual_BP = Num_Factories x BP_per_Factory x (1 + Governor_Manufacturing x 0.05)
```

Standard BP per factory = 10/year (increased by Construction Rate technology):

| Technology Level | BP per Factory |
|-----------------|----------------|
| Base | 10 |
| Improved (1) | 12 |
| Advanced (2) | 16 |
| Expert (3) | 24 |
| Master (4) | 32 |

### Mineral Mining Output

```
Annual_Tons_per_Mine = Base_Production x Accessibility x Tech_Modifier
```

Where Base_Production = 1 ton/year per mine. Mining technology progression:

| Technology Level | Production Modifier |
|-----------------|-------------------|
| Base | 1.0 |
| Improved (1) | 1.2 |
| Advanced (2) | 1.44 |
| Expert (3) | 1.728 |

Each technology level multiplies by 1.2x cumulatively.

### Terraforming Rate

```
Atm_Change_per_Year = Num_Installations x Terraform_Rate x Gas_Modifier
```

Where:
- **Terraform_Rate** depends on the technology level of terraforming installations
- **Gas_Modifier** varies by the gas being added or removed (some gases terraform faster than others)

Standard terraforming rates in atm/year per installation:

| Technology Level | Rate (atm/year) |
|-----------------|-----------------|
| Base | 0.001 |
| Improved | 0.002 |
| Advanced | 0.004 |

### Shipyard Build Time

```
Build_Time (days) = Ship_BP_Cost / (Shipyard_Capacity / 365) / Num_Slipways
```

But note: a single ship can only be built in one slipway. Multiple slipways allow parallel construction of multiple ships, not faster construction of a single ship.

Retooling time when changing ship class:
```
Retool_Time (days) = abs(New_Ship_Tonnage - Old_Ship_Tonnage) x Retool_Factor
```

### Research Speed

```
Days_to_Complete = Research_Cost / (Daily_RP_Output)
Daily_RP_Output = Sum_of_All_Labs_on_Project / 365
```

With diminishing returns for multiple labs:
```
Effective_Labs = Lab_1 + Lab_2 x 0.5 + Lab_3 x 0.25 + Lab_4 x 0.125 + ...
RP_per_Year = Effective_Labs x 10 x (1 + Scientist_Skill x 0.2)
```

### Fuel Refinery Output

```
Fuel_per_Year = Num_Refineries x 2000 x Tech_Modifier (litres)
```

Refinery technology progression:

| Technology Level | Output (litres/year) |
|-----------------|---------------------|
| Base | 2,000 |
| Improved | 4,000 |
| Advanced | 8,000 |

## A.4 Combat

### Beam Weapon To-Hit

```
Base_Chance = (1 - Range/Max_Range) x 100%
Tracking_Mod = min(1.0, Tracking_Speed / Target_Speed)
ECM_Mod = max(0, 1 - (Target_ECM - FC_ECCM) x 0.1)
Final_Chance = Base_Chance x Tracking_Mod x ECM_Mod
```

**Example**: Laser at 50% of max range, tracking 5000 km/s vs target at 4000 km/s, target ECM-2 vs FC ECCM-1:
```
Base = (1 - 0.5) x 100 = 50%
Tracking = min(1.0, 5000/4000) = 1.0
ECM = max(0, 1 - (2-1) x 0.1) = 0.9
Final = 50% x 1.0 x 0.9 = 45%
```

### Beam Weapon Damage

Damage varies by weapon type and range:

| Weapon Type | Damage Pattern |
|-------------|---------------|
| Laser | Full damage at all ranges |
| Railgun | Damage x 3 (ignores 3 armor layers) |
| Particle Beam | Full damage, range-limited |
| Meson Cannon | Bypasses armor/shields entirely |
| Plasma Carronade | Damage x 3 at close range, short max range |
| Gauss Cannon | 1 damage per shot, very high rate of fire |

### Armor Damage

```
Armor_Columns = Ship_Width (proportional to tonnage)
Damage_per_Column = Weapon_Damage (applied to random column)
Penetration = Damage_Applied > Remaining_Armor_at_Column
```

Armor column count scales with ship size:
```
Num_Columns = Ship_Tonnage / Column_Factor
```

### Internal Damage

When armor at a column is breached:
```
Component_Hit_Chance = Component_HTK / Total_Internal_HTK
Damage_to_Component = 1 HTK per hit
Component_Destroyed when Current_HTK = 0
```

### Magazine Explosion

```
Explosion_Damage = Sum(All_Missile_Warhead_Strengths_in_Magazine)
```

Applied to the host ship first, excess may damage nearby vessels within blast radius.

### Missile Point Defense

For each PD weapon firing at incoming missiles:
```
Intercept_Chance = (1 - Range/Max_Range) x Tracking_Mod x 100%
```

Where Tracking_Mod for PD against missiles:
```
Tracking_Mod = min(1.0, PD_Tracking / Missile_Speed)
```

CIWS (Close-In Weapon Systems) fire at range 0 (final defense), making their base chance very high, but they must track the missile's speed.

### Shield Regeneration

```
Regen_per_5sec = Shield_Points x Regen_Rate
Total_Shield_Strength = Num_Emitters x Shield_Tech_Level
```

Shields must recharge fully before providing maximum protection. Regeneration is continuous during combat.

## A.5 Population Growth

### Base Growth Rate

```
Annual_Growth = Population x Growth_Rate x Habitability_Modifier x Infrastructure_Modifier
```

Where:
- **Growth_Rate** = Base racial growth rate (typically 0.02 to 0.05 or 2-5% per year)
- **Habitability_Modifier** = Planet's colony cost modifier (1.0 for ideal, reduced for hostile environments)
- **Infrastructure_Modifier** = min(1.0, Infrastructure_Units / Required_Infrastructure)

### Colony Cost and Habitability

```
Colony_Cost = Sum(Environmental_Penalties)
```

Environmental penalties include:
- Temperature deviation from ideal (per degree of difference)
- Atmospheric pressure deviation
- Hostile gas presence
- Gravity deviation (minor effect)

```
Required_Infrastructure = Population x Colony_Cost
```

Without sufficient infrastructure on a hostile world, excess population suffers attrition.

### Population Capacity

```
Max_Supported_Population = Infrastructure / Colony_Cost
```

For Earth-like worlds (colony cost = 0), no infrastructure is needed and population can grow without limit.

### Growth Rate Modifiers

| Condition | Modifier |
|-----------|----------|
| Ideal planet (CC = 0) | 1.0x |
| Low infrastructure | Proportional reduction |
| Overcrowding | Growth reduced progressively |
| Governor bonus | 1 + (Admin_Skill x 0.05) |
| Genetic modification tech | Increases base racial growth rate |

### Migration

When multiple colonies exist, population can migrate between them based on:
- Relative habitability
- Available jobs (installations require workers)
- Overcrowding at source colony
- Automated migration policies set by the player

```
Migration_Rate = Base_Rate x Push_Factor x Pull_Factor
```

### Unrest and Stability

Population unrest affects productivity:
```
Effective_Production = Base_Production x (1 - Unrest_Penalty)
```

Unrest increases from:
- Overcrowding
- Insufficient infrastructure on hostile worlds
- Military losses
- Alien contact (depending on race traits)

Unrest decreases from:
- Adequate living conditions
- Military victories
- Time (natural decay)
- Governor with high political skill
