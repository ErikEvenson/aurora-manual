# 18.1 Game Mechanics

## 18.1.1 Random Number Generation

Aurora C# uses a pseudo-random number generator (PRNG) for all stochastic events in the game. Understanding how randomness works in Aurora helps set expectations for gameplay outcomes.

### Where RNG Applies

- **Combat** (see [Section 12.1 Fire Controls](../12-combat/12.1-fire-controls.md)): To-hit rolls, beam damage variance, missile evasion checks
- **Geological surveys**: Mineral deposit quantities and accessibility ratings
- **Jump point surveys**: Discovery timing and jump point destination
- **Research breakthroughs**: Chance of bonus research events
- **Crew training**: Skill advancement rolls for officers and crew
- **Spoiler race generation**: Which races appear, their strength, and location
- **Ruins exploration**: What technologies or resources are found

### Seed Behavior

Each game uses a seed established at game creation. This means that the same sequence of events in the same order will produce the same results if replayed identically. However, any change in the order of operations (different time increment choices, different fleet movements) will produce divergent outcomes.

### Practical Implications

- **Save-scumming** has limited value because the RNG state advances with each roll; reloading and taking the exact same actions produces the same result. Changing the order of actions or waiting a different number of increments can change outcomes.
- **Large sample sizes** matter: a single missile salvo might miss entirely, but over many salvos, hit rates converge toward the calculated probability.
- **Geological surveys** can produce wildly different mineral results across bodies. A system that appears poor on first survey may have rich deposits on moons or asteroids not yet surveyed.

### Combat RNG Details

In combat, the game rolls a value between 0 and the maximum weapon range for each shot. If the roll is less than or equal to the target's range bracket for that weapon, the shot hits. This means:

- At point-blank range, nearly all shots hit (roll must exceed 0 to miss)
- At maximum range, roughly 50% of shots hit for most beam weapons
- Tracking speed modifiers adjust the effective to-hit chance against fast-moving targets

## 18.1.2 Production Formulas

### Construction Rate

The base construction rate is determined by the number of Construction Factories (see [Section 6.2 Mining](../6-economy-and-industry/6.2-mining.md)) (or Conventional Industry) and their per-unit output:

```
Total BP/Year = Number_of_Factories x BP_per_Factory x Governor_Bonus x Sector_Bonus
```

Where:

- **BP_per_Factory** = 10 BP/year for TN Construction Factories (adjustable via technology)
- **Governor_Bonus** = 1 + (Manufacturing_Skill x 0.05) for assigned governors
- **Sector_Bonus** = 1 + (Manufacturing_Skill x 0.025) for sector commanders

### Conventional Industry

Conventional Industry produces at 1 BP/year per unit (1/10th the rate of TN factories). It does not require TN minerals but can only produce items on the Conventional Industry production list (infrastructure, ground forces, some basic installations).

### Mining Production

```
Annual_Output_per_Mine = Accessibility x 1_unit_per_year x Tech_Modifier
```

Where:

- **Accessibility** ranges from 0.1 to 1.0 (determines what fraction of the deposit is practically extractable per mine)
- **Tech_Modifier** increases with mining production technology (base is 1.0)

Mines deplete deposits over time. When a deposit reaches zero, mines on that body for that mineral become idle.

### Fuel Production

```
Fuel/Year = Number_of_Refineries x 2000_litres x Tech_Modifier
```

Refineries consume Sorium to produce fuel. Each refinery requires a matching supply of Sorium from mining or stockpiles.

### Research Points

```
RP/Year = Sum(Lab_Output x Scientist_Bonus)
```

Where:

- **Lab_Output** = base research output per lab (typically 10 RP per lab for the first lab, reduced contribution for additional labs on the same project from the same colony)
- **Scientist_Bonus** = 1 + (Scientist_Skill x 0.2) — a skill-25 scientist provides a 6x multiplier
- Labs assigned to the same project past the first have diminishing returns (each additional lab contributes 50% less than the previous)

### Wealth and Financial Output

```
Annual_Wealth = Population x Tax_Rate x Financial_Centre_Bonus
```

Financial Centres increase wealth generation. Each Financial Centre adds a fixed amount to yearly income.

## 18.1.3 Combat Resolution Details

### Turn Order in Combat

Combat in Aurora C# is resolved in a specific sequence within each combat sub-pulse (see [Section 12.1 Fire Controls](../12-combat/12.1-fire-controls.md)) (typically 5-second intervals during active engagements):

1. **Movement phase**: All ships and missiles move simultaneously based on their current orders and speed
2. **Fire Control assignment check**: Weapons verify their assigned targets
3. **Point Defense phase**: CIWS and PD-flagged weapons engage incoming missiles in Final Fire mode
4. **Beam weapon fire**: Beam weapons fire at their assigned targets
5. **Missile launch**: Missile launchers release ordnance at designated targets
6. **Missile tracking**: Active missiles update their tracking toward targets
7. **Damage resolution**: All hits are resolved, armor/shields reduced, internal components checked

### Beam Weapon To-Hit Calculation

```
Base_Hit_Chance = (Max_Range - Current_Range) / Max_Range x 100
Tracking_Modifier = min(1.0, Weapon_Tracking_Speed / Target_Speed)
Final_Hit_Chance = Base_Hit_Chance x Tracking_Modifier x ECM/ECCM_Modifier
```

Key modifiers:

- **ECM** reduces the effective hit chance by the ECM level (each level shifts hit chance down by 10%)
- **ECCM** on the fire control counters ECM point-for-point
- **Tracking speed** caps the maximum hit chance if the target is moving faster than the weapon can track
- **Turrets** multiply the tracking speed of the mounted weapon by 4x (single turret) or 3x per weapon (multi-weapon turrets)

### Missile Hit Resolution

Missiles use a different resolution system:

```
Missile_Hit_Chance = Missile_ECM_vs_Target_ECCM modifier
```

The missile must first survive point defense fire. Once it reaches the target (range 0), it detonates. For standard missiles, the chance to hit is based on the missile's maneuverability (agility) versus the target's speed:

```
Agility_Hit_Chance = Missile_Agility / (Missile_Agility + Target_Speed) x 100
```

Higher missile agility (from smaller warheads and more powerful engines) dramatically improves hit chances against fast targets.

### Armor Penetration

When a weapon hits, damage is applied to the armor at a random column location:

- Each hit reduces armor depth at the struck column
- If armor depth at that column reaches 0, subsequent hits penetrate to internal components
- Internal damage is resolved by rolling against the component list — each internal component has a chance of being hit proportional to its HTK (Hit to Kill) size relative to the total internal HTK
- A component struck loses 1 HTK; when all HTK are lost, the component is destroyed

### Shield Mechanics

Shields absorb damage before it reaches armor:

```
Shield_Absorption = min(Damage, Current_Shield_Strength)
Remaining_Damage = Damage - Shield_Absorption
```

Shields regenerate at a rate of 0.3 shield points per shield emitter per 5-second increment (base rate, modified by technology). Shields protect uniformly regardless of hit location.

### Critical Hits and Explosions

- **Magazine detonation**: If a magazine is hit and has ordnance loaded, there is a chance of explosion. Explosion damage equals the total warhead strength of all stored missiles, applied to the ship and potentially nearby vessels.
- **Engineering hit**: Damage to engineering spaces can cause secondary fires and progressive damage if not controlled by damage control teams.
- **Power plant hit**: Destruction of the main power plant disables all energy weapons and may reduce maximum speed.

### Electronic Warfare

- **ECM**: Each level reduces enemy fire control accuracy by 10% (applied per-level, not cumulative multiplication). ECM level 3 means the enemy needs 30% more range accuracy to hit.
- **ECCM**: Mounted on fire controls, each level negates one level of target ECM. A FC with ECCM-2 firing at a target with ECM-3 effectively faces only ECM-1.
- **Cloaking**: Reduces the ship's thermal and EM signature by the cloak percentage. A 60% cloak means sensors detect only 40% of the actual signature, dramatically reducing detection range.

### Area-Effect Weapons

Weapons with area effect (such as meson cannons) bypass armor entirely, striking internal components directly. This makes them extremely dangerous but they typically have shorter range and lower accuracy.

Missile warheads can be designed with variable damage ratings. Higher-damage warheads destroy more armor columns per hit but reduce missile agility, making them easier to intercept and less accurate against fast targets.

## 18.1.4 Salvage Mechanics

### Salvage Process

When a wreck is salvaged, recovered minerals and components go to freighters in the same fleet (see [Section 9.1 Shipyards](../9-fleet-management/9.1-shipyards.md)) as the salvage ship. C# Aurora introduces enhanced mechanics for orbital salvage operations.

**Wreck Size Precision (v2.0.0+):** As of v2.0.0, wreck sizes are no longer rounded down to the nearest 50 tons. Wrecks now retain their exact tonnage, providing more accurate salvage yields and better intelligence about the original ship's displacement.

**Orbital Salvage Enhancement:**

When the following conditions are all met, recovered materials are added directly to the population stockpile rather than requiring freighter transport:

1. The wreck is in orbit of a population belonging to the same race as the salvage ship
2. No freighters are available in the salvage fleet
3. Either a ship in the salvage fleet or the population possesses cargo shuttles

This eliminates micromanagement by allowing salvage materials to automatically transfer to nearby friendly populations when transport capacity is limited.

### Wreck Detection Events

A detection event system triggers when a ship belonging to another faction is destroyed in the same system as either a ship or deep space tracking station of your race. This enables monitoring of combat occurring in nearby space.

**Alien Salvage Events:**

An "Alien Salvage" event is generated when a wreck disappears in a monitored system without being salvaged by your own forces. This indicates that another faction has recovered the destroyed vessel's remains.

**Detection Requirements:**

Both wreck detection and alien salvage events require the presence of either:

- An active ship in the system, or
- A deep space tracking station

These capabilities provide strategic intelligence about nearby conflicts and resource recovery efforts conducted by other races.

### Technology Acquisition from Wrecks

Salvaging wrecks can yield technology insights from the components recovered. However, as of v2.0.3, **ruin-only technologies can no longer be gained from wreck salvage**. Technologies flagged as exclusive to xenoarchaeological ruins (such as certain advanced or unique techs found only in ancient ruins) cannot be reverse-engineered from wreckage, even if an NPC ship was somehow equipped with ruin-derived components. This restriction ensures that ruin technologies retain their unique discovery-based acquisition path.

## 18.1.5 Jump Point and Universe Generation

### Avoidance of Closed Universe

Aurora C# implements safeguards to prevent players from becoming trapped in known space by ensuring at least one avenue of exploration always remains available.

**Standard Jump Point Exploration:**

Normally, when jump point exploration takes place, there is a small chance to link to an existing system rather than generating a new one. However, this probability is deliberately bypassed under specific conditions.

**Closing Loop Prevention:**

The system checks whether a jump point is the only unexplored exit from known space. If so, it will not allow that final connection to link back to an existing system, even though such loops are normally possible.

**Random Stars Game Safeguards:**

For randomly generated star maps with limited system counts or configurations prone to loops:

- The code makes 20 attempts to find a new system before accepting a link to an existing system
- Any newly generated system created via the final unlinked jump point must contain a minimum of two jump points

This ensures players always have unexplored space accessible through at least one jump point, preventing scenarios where exploration becomes impossible.

## 18.1.6 Non-Support Fighter Missions

Fighters (see [Section 12.3 Missiles](../12-combat/12.3-missiles.md)) can be assigned non-support missions when operating over battlefields. These require a fleet composed only of fighters with orders targeting a system body as destination.

### Search and Destroy

This mission allows fighters to attack targets of opportunity on planets with enemy ground forces:

- Fighters do not need to be assigned to a friendly ground formation and operate independently
- Fighters automatically select hostile formations regardless of field position
- Hit chance is reduced to 33% of normal
- Hostile anti-aircraft units will engage as they would during standard ground support operations

### Flak Suppression

This mission focuses on neutralizing enemy air defense systems:

- Fighters select any hostile formation regardless of field position
- Hit chance is 50% of normal (higher than Search and Destroy since targets are pre-identified)
- Only anti-aircraft elements within formations are targeted; if none are present, no air-to-ground attack takes place
- Hostile AA fires on the fighters even if the fighters do not successfully engage

### Operational Requirements

Both missions require:

- A fleet composed only of fighters
- Orders with a system body as destination
- Enemy ground forces present on the target body

## Related Sections

- [Section 6.2 Mining](../6-economy-and-industry/6.2-mining.md) -- Production formulas and construction factory output
- [Section 8.1 Design Philosophy](../8-ship-design/8.1-design-philosophy.md) -- Ship design parameters used in formula calculations
- [Section 12.1 Fire Controls](../12-combat/12.1-fire-controls.md) -- Combat resolution mechanics and weapon to-hit formulas
- [Section 13.1 Unit Types and Formation Design](../13-ground-forces/13.1-unit-types.md) -- Fighter non-support missions against ground targets
- [Appendix A: Formulas](../appendices/A-formulas.md) -- Comprehensive formula reference including all calculations discussed here
